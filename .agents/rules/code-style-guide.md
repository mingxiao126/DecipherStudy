---
trigger: always_on
---

# Workspace Code Style Guide

## 目标
在本仓库内，所有代码优先保证：一致性、可读性、低心智负担、易回退。

## 通用规则
1. 优先复用现有风格与目录结构，不擅自引入新范式。
2. 单次改动最小化；非必要不重构、不改命名、不迁移文件。
3. 函数职责单一，避免超长函数和深层嵌套。
4. 变量/函数命名语义化，禁止无意义缩写（i/j 仅限短循环）。
5. 注释只解释“为什么”，不解释显而易见的“做什么”。
6. 出错路径必须可读：返回值、异常、日志三者至少清晰其一。
7. 删除死代码与废弃注释，避免“注释掉的大段旧实现”。

## 文件与模块
1. 一个文件只承载一个主要职责。
2. 按功能分组，不按类型过度拆分。
3. 公共能力放到明确的 util/service 层，避免重复实现。

## 前端（如适用）
1. 优先语义化 HTML 与可访问性属性（label、aria-*）。
2. 样式遵循现有体系（现有 CSS/Tailwind/组件库），不混搭多套方案。
3. 交互状态完整：loading、empty、error、success。
4. 默认移动端可用，再增强桌面端表现。

## TypeScript/JavaScript（如适用）
1. 能写明确类型就不要用 any。
2. 对外接口（props、API 响应、函数返回）优先显式类型。
3. 异步统一使用 async/await，避免 then 链式地狱。
4. 保持 import 顺序与项目既有 lint/formatter 一致。

## 范围说明
1. 本规则仅定义代码风格与结构约束，不定义任务执行流程。
2. 执行流程、自检节奏、分步确认以 Workflows 配置为准。
